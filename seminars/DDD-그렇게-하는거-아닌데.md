<img width="603" alt="image" src="https://github.com/user-attachments/assets/f09e3cd3-f2a5-41ba-965e-d4e4b7223db0">

## DDD 는 결국…

- 소프트웨어의 복잡성을 다루는 지혜.
- 도메인 모델의 적용 범위를 구현으로 확장하고, 탐색하고 학습하기 위한 다양한 원칙과 패턴. 
- 결국 도메인 주도 설계의 기반은 객체지향과 애자일. 객체지향을 잘 알아야한다. 
- 사실 지금보면 뻔한 이야기가 많다.

<br>

## 그린필드(아무것도 없는, 첫 삽을 뜬 프로젝트)에서 이야기

- “도메인 주도 설계를 하려면 헥사고날 아키텍처, 클린 아키텍처를 사용해야해요.” 
- “MS 아키텍처를 적용하기 위해 일단 서비스를 나누고 시작할게요.” 
- “애그리거트, 도메인 이벤트 등을 도입하려면 완벽하게 설계해야 합니다.”

라고 하는 사람이 주변에 있지 않은가? 혹은 나라고 생각되지 않는가? 나다 싶으면 DDD 공부 합시다~

- 당연하겠지만, 사람들은 익숙하지 않은 개념에 배타적으로 반응한다. 
  - 유사한 사례: TDD, BDD, ATDD, 애자일 등 
  - 그래서 무턱대고 DDD 개념 이야기를 꺼내면 힘들어한다.
- 먼저, 우리가 직면한 문제와 그 문제를 해결해야하는 이유에 대해 논의해야한다. 
  - 문제가 정의되면 이를 달성하기 위해 어떤 기술적 실행 관례를 채택할 것인지 말할 수 있다. 
  - 당연히 모든 것에 대한 답은 상황에 따라 다르다.

건전한 방법론은 창의적인 마음을 강화하고 해방할 수 있지만, 힘든 일을 하는 사람을 불태우거나 고무시킬 순 없다.
상황에 맞춰서 던져봐야하는 것. 오히려 반발심만 생길 수도 있다.

<br>

## 마이크로서비스 프리미엄

- MS 아키텍처의 관심사 중 하나는 “어떤 기준으로 서비스를 나눌 것인가?” 
- 자동화된 배포, 모니터링, 실패 처리, 최종 일관성 등 분산 시스템에서 고민해야할 것들이 많다. 
  - 기술 도입으로 인해 복잡성이 엄청나게 올라가버림. 
- 성급한 분리는 결국 서비스 간 결합도가 높아져버린다. 
  - 유사한 사례: 헥사고날 아키텍처, 클린 아키텍처 등 
- MSA 이점을 누릴 가능성이 크다고 해도 모놀리식으로 일단 시작하자. 
  - YAGNI 
  - 패키지 → 모듈 → MSA 까지 점진적으로 옮기자. 
  - 그리고 먼저 올바른 바운디드 컨텍스트가 뭔지 고민을 시작해보자. 
- 완벽한 설계는 없다. 기획자조차도 요구사항을 완벽하게 파악하지 못한다. 항상 변경이 가능토록 생각하면서 만드는게 좋음. 
- 완벽한 설계가 존재할 수 없다는 걸 인정하고 변화에 맞서 싸우기보다는 변화 자체를 내재화하는 프로세스를 만들자. 
  - 그리고 일단 구현하자. 
  - 구현을 통해 도메인 지식을 충분히 얻도록 하자.

### 도메인 모델이 뭘 해야할지 애매하다?

- 일단 getter 와 setter 가 시작을 도와준다. 
  - “어?” 싶겠지만, 일단 프로퍼티를 노출을 시키자. 그리고 코드를 점진적으로 개선해나가자. 
  - 그 과정에서 빈약한 도메인 모델이 점차 풍부한 도메인 모델로 변해간다. 
  - 풍부한 도메인이라는 건, 내부 자체가 얼마나 meaningful 한지를 의미한다. 
- 클래스나 함수 이름 짓기가 너무 어렵다? 
  - 유비쿼터스 언어를 도입한다. 구성원 모두가 한 뜻으로 한 단어를 사용하는 것. 기획자나 디자이너까지 모두 포함. 
  - 개발자만 영문 이름을 고민할 필요는 없다. 함께 고민하자. 
  - 바운디드 컨텍스트가 없다면 바운디드 컨텍스트 내에서만 정의할 필요는 없다. 
  - 한글 이름과 영문 이름을 모두 정하고 용어 사전에 기록한다.
    - 명사뿐만 아니라 동사까지도. 용어사전
    - 용어사전을 살아있는 문서로 만들기 위해 README.md  파일로 유지 관리할 수 있다.
    - 용어도 리뷰 대상이며 더 의미있는 용어를 지속적으로 탐색한다. 
  - 회의, 기획, 디자인, 개발 등 모든 곳에서 정한 용어를 사용하도록 하자. 써먹어버릇 해야함. 언어랑 똑같음 
  - **코드에 용어를 반영하지 않으면 개발자는 코드의 의미를 해석해야하는 부담을 떠안게 된다.**
  - 다음날, 6개월 뒤 혹은 다른 사람이 용어를 해석하는데 시간이 오래 걸림

<img width="570" alt="image" src="https://github.com/user-attachments/assets/b7ff4c88-6bcd-45ae-af95-6db3f1dd8890">


### 인수 테스트

고객의 관점에서 소프트웨어가 어떻게 작동해야 하는지를 고려한다. 인수자.

<br>

## 브라운 필드(이미 오래된 레거시 환경)에서 이야기

- “개발자는 비즈니스 도메인을 잘 몰라도 괜찮아요.” 
- “이미 같은 이름의 도메인 모델이 있네요. 중복을 피하기 위해 재사용 할게요.” 
- “바운디드 컨텍스트 간의 통신은 항상 REST 또는 gRPC 입니다.”

흠… 내 월급은 사업에서 나온다. 사업을 성공시키기 위해 나는 어떤 식으로 개발해야하는가?
비즈니스 도메인은 소프트웨어로 해결하고자 하는 문제 영역이다.
소프트웨어를 사용하는 사용자의 활동이나 관심사와 관련되어 있다.
다른 산업에서 발생하는 다양한 비즈니스로 문제를 해결한다는 점에서 독특하다.

쇼핑몰을 구축할 때 도메인은 전자 상거래(e-commerce) 이며, 사용자가 무엇에 대해 말하고 원하는지 이해하려면 당연히 전자 상거래 에 대한 지식이 필요하다.

우리는 어떤 종류의 비즈니스를 하고 있는가?
부족하거나 지나치지 않으면서 비즈니스의 요구에 맞는 솔루션을 선택할 수 있다.
(가령 OCP 를 한다면 어디까지 확장성을 고려해야하는가?)

선두 업체와 경쟁 업체는 어떤 기능을 제공하는가?
그들이 어느 기능을 가졌는지 보면 “이정도, 이런거 해두면 되겠네.” 라고 이해할 수 있다.

전자 상거래 하위에는 상품 전시 주문 결제 정산 등 하위 도메인이 있다.
때때로 외부 시스템을 사용하기도 하지.

우리 서비스가 다른 서비스와 차별화되는 점은 무엇인지 고민하고, 한정된 자원을 어디에 집중해야하는지 알아야 한다.
그래프를 그려보면 내가 담당하는 도메인이 코어인지, 서포팅인지, 일반적인지…. 를 판별하고 어느정도 자원을 투자할지 결정하기 좋다.

<img width="553" alt="image" src="https://github.com/user-attachments/assets/7b14c4a0-c728-4d05-b611-e6bbabba10e9">

> 작업들의 우선순위를 판가름하기 위해 항상 고민해볼 것.

도메인은 당연히 언제든지 변경될 수 있다. 리소스를 어디에 어떻게 투자할지 매번 고민해야한다.

<br>

## 본격적인 문제 해결

- 바운디드 컨텍스트로 경계를 명확히 나눈다. 
- 분할과 정복으로 처리를 하면 된다. 
- 팀이 이미 분리되어 있다? → 콘웨이의 법칙 (시스템 아키텍처는 결국 조직 구조를 따라간다.)
- 팀이 아직 분리되지 않았다면? → 역콘웨이의 법칙

### 조직 외부 구성원들과…

조직간에 어떻게 협업할 수 있을까? 정치
API 를 설계할 때 함께 논의하거나, 한 조직이 일방적으로 결정할 수도 있고, 강력한 중앙 통제가 발생할 수 있다.

### 조직 내부 구성원들과…

경계를 나누는 기준은 무엇인가?

1. 같은 용어라도 다른 의미를 가질 수 있고, 같은 대상이라도 다르게 지칭될 수 있다. 
2. 외부 시스템 격리 등 개발자 의견

처음부터 모든걸 나누기보다는 가장 작거나, 가장 영향력이 적거나, 가장 중요하거나… 그런 것부터 조금씩조금씩.
외부 세계와 단절할 준비도 해야한다.

data transfer object, dependency inversion principle, anti-corruption layer
좋은 도구들이 많다. 적극적으로 차용하자.

이 도구들을 어떻게 도입할 것인가? 동맹을 구해야함.

**좋은 DDD 는 “DDD 에서는 말이죠…” 로 시작하지 않는다. 앞서 말했듯 거부감을 불러 일으킨다.**
DDD 는 결국 개발기법이 아니라 일을 잘하는 방법이다.
