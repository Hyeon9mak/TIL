## 다시보기
### List 에 set(index) 를 통해 순서를 저장하면 순서가 보장이 되는가?

- 영속화 하기 전까지 메모리상에서는 순서가 보장된다!
- 그러나 DB commit 이후 새로 조회할 경우 순서가 보장되지 않음.
	- 보장을 위해서는 별도의 index 용 컬럼이 필요하다.
- 아니면 `@OrderColumn` 어노테이션을 활용할 수도 있음.

### 패키지 의존성

![](https://i.imgur.com/Q8L51is.png)
![](https://i.imgur.com/zh30elj.png)

member 패키지를 전부 지우고 다른 코드로 바꿔도 auth 에는 아무런 영향이 없어진다!

- 양방향 의존에서 단방향 의존으로 만들기
- 중간 객체를 이용한 의존성 사이클 제거
- 불필요한 의존 방향성을 제거하여 재사용 가능하게 변경
- 추상에 의존하며, 구현체에 의존하지 않는 유연한 프로그램

### 테스트 하기 쉬운 코드로 개발하기

- 테스트 하기 어려운 코드
	- 외부 상태를 변경하거나 의존하는 코드
	- 같은 입력에 다른 결과를 반환하는 코드

가령 현재 시간을 이용하는 테스트의 경우 어떻게 테스트하는게 편리할까?
- 시간을 메서드 파라미터로 전달 받는다.
- 시간을 멤버 변수로 분리하고 주입 받는다.

![](https://i.imgur.com/NAAScFH.png)


## 점진적 리팩터링
- 리팩터링시 어떤 걸 우선 해야하는가?
	- 도메인 코드?
	- 서비스 코드?
	- 테스트 코드?

도메인, 서비스 코드부터 우선 리팩터링을 진행할 경우 테스트 코드가 역할을 잃어버리게 되며, 리팩터링 범위가 커질수록 불안감이 높아진다.

신규 기능 개발시 TDD 를 수행할 때와 마찬가지로, 리팩터링 시에도 TDD 를 진행해야 안정감을 누릴 수 있다.

더 나아가서는, 테스트 코드를 수정하는게 아니라 "새로운 테스트 코드"를 작성하는 것!
특히나 코드는 고치는 것보다 새로 만드는게 더 쉽다.

![](https://i.imgur.com/EbPkOPe.png)


## Cucumber

![](https://i.imgur.com/qRozA3t.png)

### 설정 방법
![](https://i.imgur.com/LrExGMC.png)

### 사용방법

시나리오를 작성한다.
![](https://i.imgur.com/4NWdWuf.png)

