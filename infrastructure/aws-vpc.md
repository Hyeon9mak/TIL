- 서로 계정이 다른 VPC 끼리도 서로 이어 붙일 수 있다.
    
- VPC 는 그냥 재앙 수준, 모든 엔지니어가 힘을 합치면 가능 ㅋㅋㅋ
    
- VPC 가 없으면 AWS 컴퓨팅 리소스를 생성할 수 없음
    
- VPC 하나에 최대 65536개의 IP
    
    - 2^16, 2진수와 16진수 상호호환이 쉬움
- 하나의 어카운트에 여러개의 VPC 를 만들 수 있음
    
- subnet: VPC 의 IP 주소 범위
    
- IP: VPC IPv4, IPv6 모두 사용 가능, AWS 리소스에 할당
    
- 라우팅: 어디로 가야할지 트래픽 위치 전달
    
- GW: VPC 를 인터넷 연결 하려면 필요
    
    - GW 가 없으면 외부통신이 아예 불가능
- EndPoint: VPC 환경 외부의 AWS 서비스들을 private 로 연결
    
- Peering: 서로 다른 VPC 간 네트워크 통신하기 위해 사용
    
    - 계정간 피어링도 지원하는가?
- TGW
    

---

- 리전
    - 클라우드 컴퓨팅 리소스들을 호스팅하는 영역
    - 각 리전은 독립적
- 가용 영역
    - 리전은 가용영역이라는 작은 단위로 격리
    - 가용 영역 또한 장애 대비를 할 수 있음
        - 리전 전체가 장애나는 경우도 있음
        - 그래서 리전을 통해서도 장애 대응을 할 수 있으면 좋음
- 리전을 넘어서 멀티 클라우드 도 가능하긴한데… 엄청 힘듬..

---

- private 도 GW 와 라우터가 있으면 외부와 통신이 가능하다.
    - NAT GW 를 통해서 이동시키면된다.
        - 단 이 땐 어쩔 수 없이 public IP 가 필요하다.
    - 직접 통신을 못한다 일 뿐.

### Internet GW

- 수평확장이 되고 가용성이 높음. VPC 와 인터넷간 통신 가능
- 네트워크 대역폭 제약이 없음. 가용성 위험이 없음. 사용자가 관리하지 않음
- Public IP 을 할당 받은 리소스 혹은 NAT GW 는 IGW 를 통하여 VPC 외부 인터넷 통신

### NAT GW

- VPC 외부 인터넷에서 리소스 접근이 필요없지만 외부 통신이 필요한 경우
- EC2 에서 패키지 업데이트 혹은 POD 에 있는 어플리케이션 외부 API 호출이 필요한 경우
- NAT 는 우리 생활에서 많이 사용. 공유기 등등
- NAT 는 외부 공격을 사전에 방지할 수 있고, public IP 절약을 위해 사용
- DX 용도로 활용하는 경우 public IP 를 할당하지 않고 private IP 만 사용해서 쓰는 경우가 있음

## Peering

- 전이적 통신은 불가능함 (피어링 자체는 가능함. 다만 무조건 1:1 관계)
    
    - 사이클이 형성되어도 다른 쪽으로 피어링 통신은 불가능함
- 피어링이 너무 많아지면 계정마다 중복 피어링이 계속 만들어져야함
    
    - 내부 라우팅 테이블이 엄청 거대해짐…

그걸 해결하기 위한 방식이? TGW(Transit GW)

## TGW

- TGW 도 Internet GW 처럼 외부 통신을 받아서 라우팅 할 수 있긴 함
- 근데 아이들나라 내부적으로는 TGW 를 순수 피어링 용도로만 사용했음
    - 각각 외부 통신은 각 VPC 별 ELB 와 public subnet 을 통해 들어옴
- 요즘 트랜드는 ingress vpc 로 들어온 다음 TGW 를 타고 나머지 서비스 vpc 들에 흩뿌려주는게 트렌드긴 함

## Direct Connect (DX)

- on premise ↔ AWS VPC 간 전용 회선으로 연결
- 인터넷 기반 연결보다 처리량이 늘어나고 보안성 강화
- 당연히 그만큼 비쌈
- 전용 연결 방식 : 단일 고객이 회선을 단독으로 사용
- 호스팅 연결: 회선 공유형
- 대안으로 VPN 을 구성하여 사용 가능. 그렇지만 인터넷 기반 연결이라 안정성은 낮음
- AWS DX 는 실질적으로 자신들이 사업을 하기보단, 별개 지역별 사업자들에게 중개업을 해주는 허브 느낌.

## 요즘 트렌드

- 자원을 일괄 관리하는 별도 계정을 사용함
- vpc 를 만들어서 계정별로 흩뿌려줌
- 흩뿌림한 당한 계정들이 vpc 소유권한을 갖고 관리
- vpc 에 설정을 일괄적으로 변경해야한다 (피어링 등)면 자원 관리 계정에 접속해서 vpc 전체에 일괄 적용하면 됨.